(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{3e3:function(e,a,s){Promise.resolve().then(s.bind(s,8655))},8655:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return m}});var n=s(7437),l=s(2265),t=s(9376),r=s(8146),d=s(3448),o=s(8820);let c={leads:0,mql:0,agendamento:0,reunioes:0,qualificado:0,closerAgendada:0,closerRealizada:0,vendas:0};function i(e,a){return{leads:e.leads+a.leads,mql:e.mql+a.mql,agendamento:e.agendamento+a.agendamento,reunioes:e.reunioes+a.reunioes,qualificado:e.qualificado+a.qualificado,closerAgendada:e.closerAgendada+a.closerAgendada,closerRealizada:e.closerRealizada+a.closerRealizada,vendas:e.vendas+a.vendas}}function u(){let e=(0,t.useRouter)(),a=(0,t.useSearchParams)(),s=a.get("year"),u=a.get("month"),[m,g]=(0,l.useState)(s?parseInt(s):new Date().getFullYear()),[h,f]=(0,l.useState)(u?parseInt(u):new Date().getMonth()+1),[x,p]=(0,l.useState)(c),[v,j]=(0,l.useState)(null),[y,w]=(0,l.useState)(null),[q,b]=(0,l.useState)(!0),[N,_]=(0,l.useState)([]),P=new Date(m,h-1,1),S=(0,d.xc)(new Date),z=v?(0,d.up)(x.vendas,v.vendas):0,k=(0,l.useCallback)(async()=>{b(!0);try{let[e,a,s,n]=await Promise.all([(0,o.yg)(m,h,"wedding"),(0,o.yg)(m,h,"elopement"),(0,o.OU)(m,h,"wedding"),(0,o.OU)(m,h,"elopement")]),l=[...e,...a];_(l);let t=(0,o.P2)(e,m,h),r=(0,o.P2)(a,m,h);p(i(t,r)),j(s||n?s?n?{...s,leads:s.leads+n.leads,mql:s.mql+n.mql,agendamento:s.agendamento+n.agendamento,reunioes:s.reunioes+n.reunioes,qualificado:s.qualificado+n.qualificado,closer_agendada:s.closer_agendada+n.closer_agendada,closer_realizada:s.closer_realizada+n.closer_realizada,vendas:s.vendas+n.vendas,cpl:(s.cpl+n.cpl)/2}:s:n:null);let d=m,c=h-1;0===c&&(c=12,d=m-1);let[u,g]=await Promise.all([(0,o.yg)(d,c,"wedding"),(0,o.yg)(d,c,"elopement")]);w(i((0,o.P2)(u,d,c),(0,o.P2)(g,d,c)))}catch(e){console.error("Error loading data:",e)}finally{b(!1)}},[m,h]);return(0,l.useEffect)(()=>{k()},[k]),(0,n.jsx)("main",{className:"min-h-screen p-6 bg-gray-100",children:(0,n.jsxs)("div",{className:"max-w-[1600px] mx-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard - Total (WW + Elopement)"}),(0,n.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,n.jsx)(r.a$,{selectedYear:m,selectedMonth:h,onChange:(a,s)=>{g(a),f(s),e.push("/total?year=".concat(a,"&month=").concat(s),{scroll:!1})}}),(0,n.jsx)(r.fj,{year:m,month:h})]})]}),(0,n.jsx)(r.YM,{monthProgress:S,resultProgress:z,investment:24667.3}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,n.jsx)(r.yM,{selectedMonth:P,lastUpdate:new Date}),(0,n.jsx)("div",{className:"p-4",children:q?(0,n.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Carregando dados..."}):(0,n.jsx)(r.B6,{metrics:x,target:v,previousMetrics:y,monthProgress:S,cpl:43.76,deals:N,year:m,month:h})})]})]})})}function m(){return(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)("div",{className:"min-h-screen p-6 bg-gray-100 flex items-center justify-center",children:"Carregando..."}),children:(0,n.jsx)(u,{})})}}},function(e){e.O(0,[517,557,971,117,744],function(){return e(e.s=3e3)}),_N_E=e.O()}]);